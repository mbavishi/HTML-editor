{"version":3,"file":"inventyv-editor.mjs","sources":["../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/utils/editor-schema.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/utils/editor-keymaps.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/utils/editor-plugins.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/text-format-component/text-format-component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/text-format-component/text-format-component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/heading-component/heading-component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/heading-component/heading-component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/super-sub-format/super-sub-format.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/super-sub-format/super-sub-format.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/undo-redo/undo-redo.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/undo-redo/undo-redo.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/alignment/alignment.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/alignment/alignment.html","../../../projects/inventyv-editor/src/lib/components/shared/config.service.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/color-format/color-format.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/color-format/color-format.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/list-format/list-format.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/list-format/list-format.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/source-code/source-code.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/source-code/source-code.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/link/link.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/link/link.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/image/image.component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/image/image.component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/font-size/font-size.component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/font-size/font-size.component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/indent-outdent/indent-outdent.component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/indent-outdent/indent-outdent.component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/font-family/font-family.component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/font-family/font-family.component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/toolbar-component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/toolbar-component/toolbar-component.html","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/inventyv-html-editor.component.ts","../../../projects/inventyv-editor/src/lib/components/html-editor/inventyv-html-editor/inventyv-html-editor.component.html","../../../projects/inventyv-editor/src/public-api.ts","../../../projects/inventyv-editor/src/inventyv-editor.ts"],"sourcesContent":["import { MarkSpec, NodeSpec, Schema } from 'prosemirror-model';\nimport { schema as basicSchema } from 'prosemirror-schema-basic';\nimport { addListNodes } from 'prosemirror-schema-list';\nimport { tableNodes } from 'prosemirror-tables';\n\n// with required cellAttributes\nconst myTableNodes = tableNodes({\n    tableGroup: 'block',\n    cellContent: 'block+',\n    cellAttributes: {\n        style: { default: null },\n        class: { default: null },\n        backgroundColor: {\n            default: null, getFromDOM(dom: HTMLElement) {\n                return dom.style.backgroundColor || null;\n            },\n            setDOMAttr(value, attrs) {\n                if (value) attrs['style'] = (attrs['style'] || \"\") + `background-color:${value};`;\n            }\n        },\n    },\n});\n\n// MARKS DEFINITIONS\n\n// Font family\nconst fontFamilyMark: MarkSpec = {\n    attrs: { font: { default: null } },\n    parseDOM: [{ style: 'font-family', getAttrs: (value: string) => ({ font: value }) }],\n    toDOM: mark => ['span', { style: `font-family: ${mark.attrs['font']}` }, 0]\n};\n\n// Text color and background color\nconst COLORS = [\n    '#b71c1c', '#d32f2f', '#e53935', '#f46136', '#f57c00', '#ff9800', '#ffb200', '#ffeb3b', '#333',\n    '#1b5e20', '#388e3c', '#4caf50', '#81c784', '#0d47a1', '#1976d2', '#2196f3', '#64b5f6'\n];\n\nfunction createColorMark(name: string, cssProp: string): MarkSpec {\n    return {\n        attrs: { color: {} },\n        parseDOM: COLORS.map(c => ({ style: cssProp, getAttrs: value => ({ color: value }) })),\n        toDOM: node => ['span', { style: `${cssProp}: ${node.attrs['color']}` }, 0]\n    };\n}\n\n// Link mark\nconst linkMark: MarkSpec = {\n    attrs: { href: {}, title: { default: null }, class: { default: null }, style: { default: null }, target: { default: '_blank' } },\n    inclusive: false,\n    parseDOM: [{\n        tag: 'a[href]',\n        getAttrs(dom: any) {\n            return {\n                href: dom.getAttribute('href'),\n                title: dom.getAttribute('title'),\n                class: dom.getAttribute('class'),\n                style: dom.getAttribute('style'),\n                target: dom.getAttribute('target') || '_blank',\n            };\n        }\n    }],\n    toDOM(node) {\n        return ['a', { ...node.attrs }, 0];\n    }\n};\n\n// NODE DEFINITIONS\n\n// Paragraph with alignment\nconst paragraphWithAlignAndIndent: NodeSpec = {\n    ...basicSchema.spec.nodes.get('paragraph'),\n    attrs: { align: { default: 'left' }, indent: { default: 0 } },\n    parseDOM: [{ tag: 'p', getAttrs: (dom: any) => ({ align: (dom as HTMLElement).style.textAlign || 'left',  indent: parseInt((dom as HTMLElement).style.marginLeft) / 30 || 0}) }],\n    toDOM: (node: any) => ['p', { style: `text-align:${node.attrs.align}; margin-left:${node.attrs.indent * 30}px` }, 0]\n};\n\n// Heading with alignment\nconst headingWithAlign: NodeSpec = {\n    ...basicSchema.spec.nodes.get('heading'),\n    attrs: { ...basicSchema.spec.nodes.get('heading')?.attrs, align: { default: 'left' } },\n    parseDOM: Array.from({ length: 6 }).map((_, i) => ({\n        tag: `h${i + 1}`,\n        getAttrs: (dom: any) => ({ level: i + 1, align: (dom as HTMLElement).style.textAlign || 'left' })\n    })),\n    toDOM: (node: any) => [`h${node.attrs.level}`, { style: `text-align:${node.attrs.align}` }, 0]\n};\n\n// Image node (resizable via style max-width)\nconst imageNode: NodeSpec = {\n    inline: true,\n    attrs: { src: {}, alt: { default: null }, title: { default: null }, width: { default: 'auto' }, height: { default: 'auto' }, align: { default: 'center' } },\n    group: 'inline',\n    draggable: true,\n    parseDOM: [{\n        tag: 'img[src]',\n        getAttrs: (dom: any) => ({\n            src: dom.getAttribute('src'),\n            title: dom.getAttribute('title'),\n            alt: dom.getAttribute('alt'),\n            width: dom.getAttribute('width'),\n            height: dom.getAttribute('height'),\n            align: (dom as HTMLImageElement).style.textAlign || 'center',\n        })\n    }],\n    toDOM: (node: any) => ['img', {\n        src: node.attrs.src,\n        title: node.attrs.title,\n        alt: node.attrs.alt,\n        width: node.attrs.width,\n        height: node.attrs.height,\n        style: 'max-width: {node.attrs.width}; height: {node.attrs.height}; cursor:nwse-resize; text-align:${node.attrs.align}',\n    }]\n};\n\n// const imageNode: NodeSpec = {\n//     inline: true,\n//     group: 'inline',\n//     draggable: true,\n//     attrs: {\n//         src: {},\n//         alt: { default: null },\n//         title: { default: null },\n//         width: { default: null },\n//         height: { default: null },\n//         align: { default: 'center' },\n//     },\n//     parseDOM: [{\n//         tag: 'img[src]',\n//         getAttrs(dom: HTMLElement) {\n//             return {\n//                 src: dom.getAttribute('src'),\n//                 title: dom.getAttribute('title'),\n//                 alt: dom.getAttribute('alt'),\n//                 width: dom.getAttribute('width'),\n//                 height: dom.getAttribute('height'),\n//                 align: dom.getAttribute('align') || 'center',\n//             };\n//         },\n//     }],\n//     toDOM(node) {\n//         return ['img', {\n//             src: node.attrs['src'],\n//             title: node.attrs['title'],\n//             alt: node.attrs['alt'],\n//             width: node.attrs['width'] || undefined,\n//             height: node.attrs['height'] || undefined,\n//             style: `display:block; margin:0 auto; max-width:${node.attrs['width'] || '100%'}; height:${node.attrs['height'] || 'auto'};\n//                     text-align:${node.attrs['align']}; cursor: nwse-resize;`\n//             .trim(),\n//         }];\n//     },\n// };\n\n\n// MARKS COLLECTION\n\nlet marks = basicSchema.spec.marks;\n// remove\n//     ? basicSchema.spec.marks.remove('size')\n//     : basicSchema.spec.marks;\n\nmarks = marks\n    .update('sup', { parseDOM: [{ tag: 'sup' }], toDOM: () => ['sup', 0] })\n    .update('sub', { parseDOM: [{ tag: 'sub' }], toDOM: () => ['sub', 0] })\n    .update('bold', { parseDOM: [{ tag: 'strong' }, { style: 'font-weight', getAttrs: v => v === 'bold' && null }], toDOM: () => ['strong', 0] })\n    .update('italic', { parseDOM: [{ tag: 'em' }, { style: 'font-style', getAttrs: v => v === 'italic' && null }], toDOM: () => ['em', 0] })\n    .update('underline', { parseDOM: [{ tag: 'u' }, { style: 'text-decoration', getAttrs: v => v === 'underline' && null }], toDOM: () => ['u', 0] })\n    .update('strike', { parseDOM: [{ tag: 's' }, { tag: 'del' }, { style: 'text-decoration', getAttrs: v => v === 'line-through' && null }], toDOM: () => ['s', 0] })\n    .update('bgColor', createColorMark('bgColor', 'background-color'))\n    .update('textColor', createColorMark('textColor', 'color'))\n    .update('fontFamily', fontFamilyMark)\n    .update('link', linkMark)\n    .update('fontSize', {\n        attrs: { size: { default: null } },\n        parseDOM: [\n            {\n                style: 'font-size',\n                getAttrs: (value: string) => {\n                    // If size is 0px or empty, ignore and use default\n                    if (!value || value === '0px') return { size: null };\n                    return { size: value };\n                }\n            }\n        ],\n        toDOM(mark) {\n            if (!mark.attrs['size']) {\n                return ['span', 0];\n            }\n            return ['span', { style: `font-size: ${mark.attrs['size']}` }, 0];\n        }\n    })\n\n\n// Final Schema\nexport const editorSchema = new Schema({\n    nodes: addListNodes(basicSchema.spec.nodes, 'paragraph block*', 'block')\n        .append(myTableNodes)\n        .update('paragraph', paragraphWithAlignAndIndent)\n        .update('heading', headingWithAlign)\n        .update('image', imageNode),\n    marks\n});","import { keymap } from \"prosemirror-keymap\";\nimport { toggleMark } from \"prosemirror-commands\";\nimport { Schema } from \"prosemirror-model\";\nimport { redo, undo } from \"prosemirror-history\";\n\nexport function buildKeymap(schema: Schema) {\n  const keys: Record<string, any> = {};\n\n  // Basic formatting shortcuts\n  if (schema.marks['bold']) keys[\"Mod-b\"] = toggleMark(schema.marks['bold']);\n  if (schema.marks['italic']) keys[\"Mod-i\"] = toggleMark(schema.marks['italic']);\n  if (schema.marks['underline']) keys[\"Mod-u\"] = toggleMark(schema.marks['underline']);\n  if (schema.marks['strike']) keys[\"Mod-Shift-x\"] = toggleMark(schema.marks['strike']);\n  if (schema.marks['sup']) keys[\"Mod-Shift-+\"] = toggleMark(schema.marks['sup']);\n  if (schema.marks['sub']) keys[\"Mod-=\"] = toggleMark(schema.marks['sub']);\n  keys[\"Mod-z\"] = undo;\n  keys[\"Mod-y\"] = redo;\n\n  return keymap(keys);\n}","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { history } from 'prosemirror-history';\nimport { Plugin } from 'prosemirror-state';\nimport { tableEditing, columnResizing } from 'prosemirror-tables';\nimport { Decoration, DecorationSet } from 'prosemirror-view';\nimport { buildKeymap } from './editor-keymaps';\nimport { editorSchema } from './editor-schema';\n\n//\nconst tablePlugins: Plugin[] = [\n  columnResizing({ handleWidth: 5, cellMinWidth: 25 }),\n  tableEditing()\n];\nconst collapseEmptyParas = new Plugin({\n  appendTransaction(transactions, oldState, newState) {\n    let tr = newState.tr;\n    let modified = false;\n\n    newState.doc.descendants((node, pos) => {\n      if (node.type.name === \"paragraph\" && node.content.size === 0) {\n        const next = newState.doc.nodeAt(pos + node.nodeSize);\n        if (next && next.type.name === \"paragraph\" && next.content.size === 0) {\n          tr.delete(pos, pos + node.nodeSize);\n          modified = true;\n        }\n      }\n    });\n\n    return modified ? tr : null;\n  },\n});\n\n\nfunction imageResizePlugin() {\n  return new Plugin({\n    props: {\n      decorations(state) {\n        const decorations: Decoration[] = [];\n        state.doc.descendants((node, pos) => {\n          if (node.type.name === \"image\") {\n            const deco = Decoration.node(pos, pos + 1, {\n              class: \"resizable-image\"\n            });\n            decorations.push(deco);\n          }\n        });\n        return DecorationSet.create(state.doc, decorations);\n      },\n      handleDOMEvents: {\n        mousedown(view, event) {\n          const target = event.target as HTMLElement;\n          if (target.nodeName === \"IMG\") {\n            const img = target as HTMLImageElement;\n            let startX = event.clientX;\n            let startWidth = img.width;\n\n            function onMouseMove(e: MouseEvent) {\n              const diff = e.clientX - startX;\n              const newWidth = Math.max(50, startWidth + diff); // min width 50px\n              img.setAttribute(\"width\", newWidth.toString());\n            }\n\n            function onMouseUp(e: MouseEvent) {\n              window.removeEventListener(\"mousemove\", onMouseMove);\n              window.removeEventListener(\"mouseup\", onMouseUp);\n\n              // update ProseMirror state with new width\n              const pos = view.posAtDOM(img, 0);\n              const tr = view.state.tr.setNodeMarkup(pos, undefined, {\n                ...view.state.doc.nodeAt(pos)!.attrs,\n                width: img.getAttribute(\"width\"),\n              });\n              view.dispatch(tr);\n            }\n\n            window.addEventListener(\"mousemove\", onMouseMove);\n            window.addEventListener(\"mouseup\", onMouseUp);\n            return true;\n          }\n          return false;\n        }\n      }\n    }\n  });\n}\n\nfunction linkClickPlugin() {\n  return new Plugin({\n    props: {\n      handleDOMEvents: {\n        click(view, event) {\n          let target = event.target as HTMLElement;\n          console.log('Clicked element:', target);\n          // Walk up if inside bold/italic/etc inside <a>\n          while (target && target.tagName !== 'A' && target !== view.dom) {\n            target = target.parentElement as HTMLElement;\n          }\n          if (target && target.tagName === 'A') {\n            const href = target.getAttribute('href');\n            const targetAttr = target.getAttribute('target') || '_self';\n\n            if (href) {\n              // stop ProseMirror default\n              event.preventDefault();\n              window.open(href, targetAttr);\n              return true;\n            }\n          }\n\n          return false;\n        }\n      }\n    }\n  });\n}\n\n\n// Centralize all editor plugins here\nexport const editorPlugins = [\n  buildKeymap(editorSchema),\n  keymap(baseKeymap), // default keyboard shortcuts\n  history(), // undo/redo\n  ...tablePlugins,\n  imageResizePlugin(),\n  collapseEmptyParas,\n  linkClickPlugin()\n];","import { Component, Input } from '@angular/core';\nimport { toggleMark } from 'prosemirror-commands';\n\n@Component({\n  selector: 'app-text-format-component',\n  imports: [],\n  templateUrl: './text-format-component.html',\n  styleUrl: './text-format-component.css'\n})\n\nexport class TextFormatComponent {\n  @Input() content: any;\n\n  // Bold, Italic, Underline functionality\n   toggleBold() {\n    toggleMark(this.content.state.schema.marks['strong'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n\n  toggleItalic() {\n    toggleMark(this.content.state.schema.marks['em'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n\n  toggleUnderLine() {\n    toggleMark(this.content.state.schema.marks['underline'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n\n  toggleStrike() {\n    toggleMark(this.content.state.schema.marks['strike'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n}\n","<div class=\"btn-group\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleBold()\" title=\"Bold\"><i class=\"fas fa-bold\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleItalic()\" title=\"Italic\"><i class=\"fas fa-italic\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleUnderLine()\" title=\"Underline\"><i class=\"fas fa-underline\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleStrike()\" title=\"Strike\"><i class=\"fas fa-strikethrough\"></i></button>\n</div>","import { Component, Input } from '@angular/core';\nimport { setBlockType } from 'prosemirror-commands';\n\n@Component({\n  selector: 'app-heading-component',\n  imports: [],\n  templateUrl: './heading-component.html',\n  styleUrl: './heading-component.css'\n})\nexport class HeadingComponent {\n  @Input() content: any;\n  \n  setBlockHeading(level: number | null) {\n    const { state, dispatch } = this.content;\n    const schema = state.schema;\n\n    if (level === null) {\n      setBlockType(schema.nodes['paragraph'])(state, dispatch);\n    } else {\n      const heading = schema.nodes['heading'];\n      if (heading) {\n        setBlockType(heading, { level })(state, dispatch);\n      }\n    }\n    this.content.focus();\n  }\n}\n","<div class=\"dropdown\">\n    <button class=\"btn toolbar-button fs-6 dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" title=\"Select Heading\">\n        <i class=\"fas fa-heading\"></i>\n    </button>\n    <ul class=\"dropdown-menu\">\n        <li><a class=\"dropdown-item\" (click)=\"setBlockHeading(null)\">Normal Text</a></li>\n        <li><a class=\"dropdown-item\" (click)=\"setBlockHeading(1)\"><span style=\"font-size: 1.6rem;\">Heading 1</span></a>\n        </li>\n        <li><a class=\"dropdown-item\" (click)=\"setBlockHeading(2)\"><span style=\"font-size: 1.3rem;\">Heading 2</span></a>\n        </li>\n        <li><a class=\"dropdown-item\" (click)=\"setBlockHeading(3)\"><span style=\"font-size: 1.1rem;\">Heading 3</span></a>\n        </li>\n        <li><a class=\"dropdown-item\" (click)=\"setBlockHeading(4)\"><span style=\"font-size: 1rem;\">Heading 4</span></a>\n        </li>\n    </ul>\n</div>","import { Component, Input } from '@angular/core';\nimport { toggleMark } from 'prosemirror-commands';\n\n@Component({\n  selector: 'app-super-sub-format',\n  imports: [],\n  templateUrl: './super-sub-format.html',\n  styleUrl: './super-sub-format.css'\n})\n\nexport class SuperSubFormat {\n  @Input() content: any;\n  \n  // Superscript and Subscript functionality\n  toggleSuperscript() {\n    toggleMark(this.content.state.schema.marks['sup'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n  toggleSubscript() {\n    toggleMark(this.content.state.schema.marks['sub'])(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n}\n","<div class=\"btn-group\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleSuperscript()\" title=\"Superscript\"><i class=\"fas fa-superscript\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleSubscript()\" title=\"Subscript\"><i class=\"fas fa-subscript\"></i></button>\n</div>","import { Component, Input } from '@angular/core';\nimport { undo, redo } from \"prosemirror-history\";\n\n@Component({\n  selector: 'app-undo-redo',\n  imports: [],\n  templateUrl: './undo-redo.html',\n  styleUrl: './undo-redo.css'\n})\n\nexport class UndoRedo {\n  @Input() content: any;\n  \n  undoAction() {\n    undo(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n\n  redoAction() {\n    redo(this.content.state, this.content.dispatch);\n    this.content.focus();\n  }\n}\n","<div class=\"btn-group\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"undoAction()\" title=\"Undo\"><i class=\"fas fa-undo\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"redoAction()\" title=\"Redo\"><i class=\"fas fa-redo\"></i></button>\n</div>","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-alignment',\n  imports: [],\n  templateUrl: './alignment.html',\n  styleUrl: './alignment.css'\n})\n\nexport class Alignment {\n  @Input() content: any;\n\n  setAlign(align: string) {\n    const { state, dispatch } = this.content;\n    const { from, to } = state.selection;\n    const tr = state.tr;\n    state.doc.nodesBetween(from, to, (node: any, pos: any) => {\n      if (node.type.name === 'paragraph' || node.type.name === 'heading') {\n        tr.setNodeMarkup(pos, undefined, { ...node.attrs, align });\n      }\n    });\n    if (tr.docChanged) {\n      dispatch(tr);\n      this.content.focus();\n    }\n  }\n}\n","<div class=\"btn-group border-end-1\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"setAlign('left')\" title=\"Align text left\"><i class=\"fas fa-align-left\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"setAlign('center')\" title=\"Align text center\"><i class=\"fas fa-align-center\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"setAlign('right')\" title=\"Align text right\"><i class=\"fas fa-align-right\"></i></button>\n    <button class=\"btn toolbar-button fs-6 border-end-1\" (click)=\"setAlign('justify')\" title=\"Align text justify\"><i class=\"fas fa-align-justify\"></i></button>\n</div>","import { Injectable } from '@angular/core';\n\ninterface HeadingOption {\n  label: string;\n  size: string;\n  level: number | null;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class ConfigService {\n\n  // colors for font color and background color\n  private colors = [\n    \"#b71c1c\", \"#d32f2f\", \"#e53935\", \"#f46136\", \"#f57c00\", \"#ff9800\", \"#ffb200\", \"#ffeb3b\",\n    \"#1b5e20\", \"#388e3c\", \"#4caf50\", \"#81c784\", \"#0d47a1\", \"#1976d2\", \"#2196f3\", \"#64b5f6\"\n  ];\n\n  // font families for font family dropdown\n  private fontFamilies = [\n    \"Arial\", \"Calibri\", \"Cambria\", \"Candara\", \"Century Gothic\", \"Consolas\", \"Corbel\", \"Courier New\",\n    \"Franklin Gothic Medium\", \"Georgia\", \"Segoe UI\", \"Tahoma\", \"Times New Roman\", \"Trebuchet MS\", \"Verdana\",\n    \"Book Antiqua\", \"Garamond\", \"Palatino Linotype\", \"Lucida Console\", \"Lucida Sans Unicode\", \"Comic Sans MS\"\n  ];\n\n  // All the standard font sizes in px\n  private fontSizes = [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];\n\n  // Headings options for heading dropdown\n  private headings: HeadingOption[] = [\n    { label: 'Normal Text', size: '1rem', level: null },\n    { label: 'Heading 1', size: '1.6rem', level: 1 },\n    { label: 'Heading 2', size: '1.3rem', level: 2 },\n    { label: 'Heading 3', size: '1.1rem', level: 3 },\n    { label: 'Heading 4', size: '1rem', level: 4 },\n  ];\n\n  // Function to get configuration values\n  getConfig(key: string): any {\n    return (this as any)[key];\n  }\n}","import { NgFor } from '@angular/common';\nimport { Component, Input } from '@angular/core';\nimport { toggleMark } from 'prosemirror-commands';\nimport { ConfigService } from '../../../../shared/config.service';\n\n@Component({\n  selector: 'app-color-format',\n  imports: [NgFor],\n  templateUrl: './color-format.html',\n  styleUrl: './color-format.css'\n})\n\nexport class ColorFormat {\n  @Input() content: any;\n\n  constructor(private configService: ConfigService) { }\n\n  colors: string[] = [];\n\n  setFontColor(event: Event) {\n    const color = (event.target as HTMLInputElement).value;\n    const { state, dispatch } = this.content;\n    const markType = state.schema.marks[\"textColor\"];\n    toggleMark(markType, { color })(state, dispatch);\n    this.content.focus();\n  }\n\n  setBackgroundColor(event: Event) {\n    const color = (event.target as HTMLInputElement).value;\n    const { state, dispatch } = this.content;\n    const markType = state.schema.marks[\"bgColor\"];\n    toggleMark(markType, { color })(state, dispatch);\n    this.content.focus();\n  }\n\n  ngOnInit() {\n    this.colors = this.configService.getConfig('colors') || [];\n  }\n}","<div class=\"d-flex\">\n    <div class=\"color-palette\">\n        <!-- Font color -->\n        <button class=\"btn toolbar-button fs-6\" type=\"button\" title=\"Text Color\" (click)=\"fontColorPicker.click()\">\n            <i class=\"fas fa-paint-brush\"></i>\n        </button>\n        <input #fontColorPicker type=\"color\" class=\"color-picker\" (change)=\"setFontColor($event)\">\n    </div>\n    <!-- Background color -->\n    <div class=\"color-palette\">\n        <button class=\"btn toolbar-button fs-6\" type=\"button\" title=\"Background Color\" (click)=\"bgColorPicker.click()\">\n            <i class=\"fas fa-fill-drip\"></i>\n        </button>\n        <input #bgColorPicker type=\"color\" class=\"color-picker\" (change)=\"setBackgroundColor($event)\">\n    </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { liftListItem, wrapInList } from 'prosemirror-schema-list';\n\n@Component({\n  selector: 'app-list-format',\n  imports: [],\n  templateUrl: './list-format.html',\n  styleUrl: './list-format.css'\n})\n\nexport class ListFormat {\n  @Input() content: any;\n\n  // Bullet and Numbered List functionality\n  private isInList(state: any, type: string): boolean {\n    const { $from } = state.selection;\n    for (let d = $from.depth; d > 0; d--) {\n      if ($from.node(d).type.name === type) return true;\n    }\n    return false;\n  }\n\n  toggleBulletList() {\n    const { state, dispatch } = this.content;\n    const schema = state.schema;\n    const listNode = schema.nodes['bullet_list'];\n    const listItem = schema.nodes['list_item'];\n\n    if (this.isInList(state, 'bullet_list')) {\n      liftListItem(listItem)(state, dispatch);\n    } else {\n      wrapInList(listNode)(state, dispatch);\n    }\n    this.content.focus();\n  }\n\n  toggleOrderedList() {\n    const { state, dispatch } = this.content;\n    const schema = state.schema;\n    const listNode = schema.nodes['ordered_list'];\n    const listItem = schema.nodes['list_item'];\n\n    if (this.isInList(state, 'ordered_list')) {\n      liftListItem(listItem)(state, dispatch);\n    } else {\n      wrapInList(listNode)(state, dispatch);\n    }\n    this.content.focus();\n  }\n}\n","<div class=\"btn-group\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleBulletList()\"\n        title=\"Insert unordered List\"><i class=\"fas fa-list-ul\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleOrderedList()\"\n        title=\"Insert ordered List\"><i class=\"fas fa-list-ol\"></i></button>\n</div>","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-source-code',\n  imports: [],\n  templateUrl: './source-code.html',\n  styleUrl: './source-code.css'\n})\nexport class SourceCode {\n  @Input() html: any;\n  showSourceCode = false;\n\n  toggleSourceCode() {\n    this.showSourceCode = !this.showSourceCode;\n  }\n}\n","<div class=\"btn-group me-2\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"toggleSourceCode()\" title=\"Superscript\"><i class=\"bi bi-code-slash\"></i></button>\n</div>","import { Component, Input, OnInit, OnDestroy } from '@angular/core';\nimport { NgIf } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { EditorView } from 'prosemirror-view';\n\n@Component({\n  selector: 'app-link',\n  standalone: true,\n  imports: [NgIf, FormsModule],\n  templateUrl: './link.html',\n  styleUrls: ['./link.css'],\n})\nexport class LinkComponent implements OnInit, OnDestroy {\n  @Input() content!: EditorView;     // pass EditorView from parent\n\n  isLinkActive = false;\n  linkText = '';\n  linkUrl = '';\n  showLinkDialog = false;\n\n  private selectionHandler = () => this.updateLinkState();\n\n  ngOnInit() {\n    if (!this.content) {\n      console.warn('LinkComponent: EditorView not provided via [view].');\n      return;\n    }\n\n    // initial state\n    this.updateLinkState();\n\n    // listen to user-driven selection changes (mouse & keyboard).\n    // This is simple and reliable for typical usage.\n    this.content.dom.addEventListener('mouseup', this.selectionHandler);\n    this.content.dom.addEventListener('keyup', this.selectionHandler);\n    this.content.dom.addEventListener('focus', this.selectionHandler);\n  }\n\n  ngOnDestroy() {\n    if (this.content) {\n      this.content.dom.removeEventListener('mouseup', this.selectionHandler);\n      this.content.dom.removeEventListener('keyup', this.selectionHandler);\n      this.content.dom.removeEventListener('focus', this.selectionHandler);\n    }\n  }\n\n  // Open the dialog and pre-fill text/url if possible\n  openLinkDialog() {\n    if (!this.content) return;\n    const { state } = this.content;\n    const { from, to, empty } = state.selection;\n    const linkMark = state.schema.marks['link'];\n\n    if (!empty) {\n      // selected text → prefill text and try to find href in selection\n      this.linkText = state.doc.textBetween(from, to, ' ');\n      let href = '';\n      state.doc.nodesBetween(from, to, (node) => {\n        const m = node.marks.find(mark => mark.type === linkMark);\n        if (m && !href) href = m.attrs['href'];\n      });\n      this.linkUrl = href;\n    } else {\n      // empty selection → if cursor has link mark, prefill href\n      const $pos = state.selection.$from;\n      const mark = $pos.marks().find(m => m.type === linkMark);\n      this.linkUrl = mark ? mark.attrs['href'] : '';\n      this.linkText = '';\n    }\n\n    this.showLinkDialog = true;\n  }\n\n  // Insert or apply link mark\n  applyLink() {\n    if (!this.linkUrl || !this.content) return;\n    const { state, dispatch } = this.content;\n    const { schema, selection } = state;\n    const { from, to } = selection;\n    const linkMark = schema.marks['link'];\n\n    if (from !== to) {\n      dispatch(state.tr.addMark(from, to, linkMark.create({ href: this.linkUrl })));\n    } else {\n      const text = this.linkText && this.linkText.trim().length > 0 ? this.linkText.trim() : this.linkUrl;\n      const node = schema.text(text, [linkMark.create({ href: this.linkUrl })]);\n      dispatch(state.tr.insert(from, node));\n    }\n\n    // reset and close\n    this.linkText = '';\n    this.linkUrl = '';\n    this.showLinkDialog = false;\n\n    // ensure button state updates\n    setTimeout(() => this.updateLinkState());\n  }\n\n  cancelLinkDialog() {\n    this.linkText = '';\n    this.linkUrl = '';\n    this.showLinkDialog = false;\n  }\n\n  removeLink() {\n    if (!this.content) return;\n    const { state, dispatch } = this.content;\n    const { from, to } = state.selection;\n    const linkMark = state.schema.marks['link'];\n    dispatch(state.tr.removeMark(from, to, linkMark));\n    setTimeout(() => this.updateLinkState());\n  }\n\n  // Updates whether current selection/cursor is inside a link\n  updateLinkState() {\n    if (!this.content) { this.isLinkActive = false; return; }\n    const state = this.content.state;\n    const { from, to, empty } = state.selection;\n    const linkMark = state.schema.marks['link'];\n\n    if (empty) {\n      const $pos = state.selection.$from;\n      this.isLinkActive = $pos.marks().some(m => m.type === linkMark);\n    } else {\n      this.isLinkActive = state.doc.rangeHasMark(from, to, linkMark);\n    }\n  }\n}\n","<div class=\"btn-group\">\n  <button class=\"btn toolbar-button fs-6\" title=\"Insert Link\" (click)=\"openLinkDialog()\">\n    <i class=\"fas fa-link\"></i>\n  </button>\n\n  <button class=\"btn toolbar-button fs-6\" title=\"Remove Link\" (click)=\"removeLink()\" [disabled]=\"!isLinkActive\">\n    <i class=\"fas fa-unlink\"></i>\n  </button>\n</div>\n\n<!-- Overlay to close dialog on outside click -->\n<div *ngIf=\"showLinkDialog\" class=\"position-fixed top-0 start-0 w-100 h-100\" style=\"z-index: 1999;\"\n  (click)=\"cancelLinkDialog()\"></div>\n\n<!-- Floating Link Dialog -->\n<div *ngIf=\"showLinkDialog\" class=\"p-3 border rounded bg-light mt-2\"\n  style=\"max-width: 320px; position: absolute; z-index: 2000;\">\n  <div class=\"mb-2\">\n    <label class=\"form-label\">Text</label>\n    <input type=\"text\" [(ngModel)]=\"linkText\" class=\"form-control form-control-sm\" />\n  </div>\n  <div class=\"mb-2\">\n    <label class=\"form-label\">URL</label>\n    <input type=\"text\" [(ngModel)]=\"linkUrl\" class=\"form-control form-control-sm\" placeholder=\"https://example.com\" />\n  </div>\n  <div class=\"d-flex justify-content-end\">\n    <button type=\"button\" class=\"btn toolbar-buttonbtn-sm btn-secondary me-2\" (click)=\"applyLink()\">Insert</button>\n    <button type=\"button\" class=\"btn toolbar-buttonbtn-sm btn-outline-secondary\" (click)=\"cancelLinkDialog()\">Cancel</button>\n  </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { EditorView } from 'prosemirror-view';\nimport { editorSchema } from '../../utils/editor-schema';\nimport { NgIf } from '@angular/common';\n\n@Component({\n  selector: 'app-image',\n  standalone: true,\n  imports: [FormsModule, NgIf],\n  templateUrl: './image.component.html',\n  styleUrl: './image.component.css'\n})\n\nexport class ImageComponent {\n  @Input() content!: EditorView;\n\n  showImageDialog = false;\n  imageUrl: string = '';\n  imageAlt: string = 'image';\n  imageTitle: string = 'image';\n  imageWidth: string = 'auto';\n  imageHeight: string = 'auto';\n\n  schema = editorSchema;\n\n  openImageDialog() {\n    this.imageUrl = '';\n    this.imageAlt = 'image';\n    this.imageTitle = 'image';\n    this.imageWidth = 'auto';\n    this.imageHeight = 'auto';\n    this.showImageDialog = true;\n  }\n\n  cancelImageDialog() {\n    this.showImageDialog = false;\n  }\n\n  insertImage() {\n    if (!this.imageUrl || !this.content) return;\n\n    const { state, dispatch } = this.content;\n    const { from, to } = state.selection;\n\n    const imageNode = this.schema.nodes['image'].create({\n      src: this.imageUrl,\n      alt: this.imageAlt || 'image',\n      title: this.imageTitle || 'image',\n      width: this.imageWidth || '100%',\n      height: this.imageHeight || 'auto',\n      align: 'right',\n    });\n\n    dispatch(state.tr.replaceSelectionWith(imageNode).scrollIntoView());\n    this.showImageDialog = false;\n  }\n}\n","<!-- Toolbar Button -->\n<button class=\"btn toolbar-button fs-6\" title=\"Insert Image\" (click)=\"openImageDialog()\">\n    <i class=\"fas fa-image\"></i>\n</button>\n<!-- Overlay (clicking this closes the dialog) -->\n<div *ngIf=\"showImageDialog\" class=\"position-fixed top-0 start-0 w-100 h-100\" style=\"z-index: 1999;\"\n    (click)=\"cancelImageDialog()\"></div>\n\n<!-- Floating Image Dialog -->\n<div *ngIf=\"showImageDialog\" class=\"p-3 border rounded bg-light mt-2 shadow\"\n    style=\"max-width: 320px; position: absolute; z-index: 2000;\">\n\n    <!-- Your existing fields -->\n    <div class=\"mb-2\">\n        <label class=\"form-label\">Image URL</label>\n        <input type=\"text\" [(ngModel)]=\"imageUrl\" class=\"form-control form-control-sm\"\n            placeholder=\"https://example.com/image.png\" />\n    </div>\n    <div class=\"mb-2\">\n        <label class=\"form-label\">Alt Text</label>\n        <input type=\"text\" [(ngModel)]=\"imageAlt\" class=\"form-control form-control-sm\" placeholder=\"Description\" />\n    </div>\n    <div class=\"row mb-2\">\n        <div class=\"col-6\">\n            <label class=\"form-label\">Width</label>\n            <input type=\"number\" [(ngModel)]=\"imageWidth\" class=\"form-control form-control-sm\" placeholder=\"Width\" />\n        </div>\n        <div class=\"col-6\">\n            <label class=\"form-label\">Height</label>\n            <input type=\"number\" [(ngModel)]=\"imageHeight\" class=\"form-control form-control-sm\" placeholder=\"Height\" />\n        </div>\n    </div>\n    <div class=\"d-flex justify-content-end\">\n        <button type=\"button\" class=\"btn toolbar-buttonbtn-sm btn-secondary me-2\" (click)=\"insertImage()\">Insert</button>\n        <button type=\"button\" class=\"btn toolbar-buttonbtn-sm btn-outline-secondary\" (click)=\"cancelImageDialog()\">Cancel</button>\n    </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { editorSchema } from '../../utils/editor-schema';\nimport { NgFor } from '@angular/common';\nimport { setBlockType } from 'prosemirror-commands';\nimport { ConfigService } from '../../../../shared/config.service';\n\n@Component({\n  selector: 'app-font-size',\n  standalone: true,\n  imports: [NgFor],\n  templateUrl: './font-size.component.html',\n  styleUrl: './font-size.component.css'\n})\n\nexport class FontSizeComponent {\n  @Input() content!: EditorView;\n  fontSizes: number[] = [];\n  headings: any = [];\n\n  constructor(private configService: ConfigService) { }\n\n  setBlockHeading(level: number | null) {\n    const { state, dispatch } = this.content;\n    const schema = state.schema;\n\n    if (level === null) {\n      setBlockType(schema.nodes['paragraph'])(state, dispatch);\n    } else {\n      const heading = schema.nodes['heading'];\n      if (heading) {\n        setBlockType(heading, { level })(state, dispatch);\n      }\n    }\n    this.content.focus();\n  }\n\n  setFontSize(size: number) {\n    if (!this.content) return;\n\n    const markType: any = editorSchema.marks['fontSize'];\n    if (!markType) return;\n\n    const { state, dispatch } = this.content;\n    const { tr, selection } = state;\n    const { from, to, empty } = selection;\n    // only apply when text is selected\n    if (empty) return;\n    // Remove existing fontSize marks in range\n    tr.removeMark(from, to, markType);\n    // Add the new size mark\n    tr.addMark(from, to, markType.create({ size: `${size}px` }));\n\n    dispatch(tr);\n    this.content.focus();\n  }\n\n  ngOnInit() {\n    this.headings = this.configService.getConfig('headings') || this.headings;\n    this.fontSizes = this.configService.getConfig('fontSizes') || this.fontSizes;\n  }\n}\n","<div class=\"btn-group\">\n  <!-- Heading size -->\n  <div class=\"dropdown\">\n    <button class=\"btn toolbar-button fs-6 dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\"\n      title=\"Select Heading\">\n      <i class=\"fas fa-heading\"></i>\n    </button>\n    <ul class=\"dropdown-menu\">\n      <li *ngFor=\"let h of headings\">\n        <a class=\"dropdown-item\" (click)=\"setBlockHeading(h.level)\">\n          <span [style.fontSize]=\"h.size\">{{ h.label }}</span>\n        </a>\n      </li>\n    </ul>\n    <!-- Font Size -->\n    <button class=\"btn toolbar-button fs-6 dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\"\n      title=\"Select Font Size\">\n      <i class=\"fas fa-text-height\"></i>\n    </button>\n    <ul class=\"dropdown-menu font-size-menu\" style=\"max-height: 300px; overflow-y: auto; width: 60px;\">\n      <li *ngFor=\"let size of fontSizes\">\n        <a class=\"dropdown-item\" (click)=\"setFontSize(size)\">\n          <span>{{ size }}</span>\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { liftListItem, sinkListItem } from 'prosemirror-schema-list';\nimport { EditorState, Transaction } from 'prosemirror-state';\n\n@Component({\n  selector: 'app-indent-outdent',\n  standalone: true,\n  imports: [],\n  templateUrl: './indent-outdent.component.html',\n  styleUrl: './indent-outdent.component.css'\n})\nexport class IndentOutdentComponent {\n  @Input() content!: any;\n\n  // Indent command\n  indent() {\n    if (!this.content) return;\n    const { state, dispatch } = this.content;\n    if (state.schema.nodes.list_item) {\n      if (sinkListItem(state.schema.nodes.list_item)(state, dispatch)) {\n        return true;\n      }\n    }\n    return this.updateIndent(state, dispatch, +1);\n  }\n\n  // Outdent command\n  outdent() {\n    if (!this.content) return;\n    const { state, dispatch } = this.content;\n    if (state.schema.nodes.list_item) {\n      if (liftListItem(state.schema.nodes.list_item)(state, dispatch)) {\n        return true;\n      }\n    }\n    return this.updateIndent(state, dispatch, -1);\n  }\n  // Helper: adjust paragraph indent\n  private updateIndent(state: EditorState, dispatch: (tr: Transaction) => void, delta: number) {\n    const { tr, selection } = state;\n    const { from, to } = selection;\n    tr.doc.nodesBetween(from, to, (node, pos) => {\n      if (node.isTextblock && node.type.name === 'paragraph') {\n        const newIndent = Math.max(0, (node.attrs['indent'] || 0) + delta);\n        tr.setNodeMarkup(pos, undefined, { ...node.attrs, indent: newIndent });\n      }\n    });\n    if (tr.docChanged) {\n      dispatch(tr);\n      return true;\n    }\n    return false;\n  }\n}","<div class=\"btn-group\">\n    <button class=\"btn toolbar-button fs-6\" (click)=\"indent()\" title=\"Indent\"><i class=\"fas fa-indent\"></i></button>\n    <button class=\"btn toolbar-button fs-6\" (click)=\"outdent()\" title=\"Outdent\"><i class=\"fas fa-outdent\"></i></button>\n</div>","import { Component, Input } from '@angular/core';\nimport { toggleMark } from 'prosemirror-commands';\nimport { NgFor } from '@angular/common';\nimport { ConfigService } from '../../../../shared/config.service';\n\n@Component({\n  selector: 'app-font-family',\n  standalone: true,\n  imports: [ NgFor],\n  templateUrl: './font-family.component.html',\n  styleUrl: './font-family.component.css'\n})\n\nexport class FontFamilyComponent {\n  @Input() content!: any;\n  fontFamilies: any = [];\n\n  constructor(private configService: ConfigService) { }\n\n  setFontFamily(event: Event) {\n    if (!this.content) return;\n    const font = (event.target as HTMLSelectElement).value;\n    const { state, dispatch } = this.content;\n    const markType = state.schema.marks.fontFamily;\n\n    if (!markType) return;\n\n    if (font) {\n      toggleMark(markType, { font })(state, dispatch);\n    } else {\n      // remove font family mark if \"default\" is chosen\n      toggleMark(markType, {})(state, dispatch);\n    }\n\n    this.content.focus();\n  }\n\n  ngOnInit() {\n    this.fontFamilies = this.configService.getConfig('fontFamilies') || this.fontFamilies;\n  }\n}\n","<div class=\"btn-group\">\n  <select class=\"form-select form-select-sm font-family-dropdown\" (change)=\"setFontFamily($event)\">\n    <!-- <option selected disabled>Font Family</option> -->\n    <option *ngFor=\"let font of fontFamilies\" [value]=\"font\">{{ font }}</option>\n  </select>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { TextFormatComponent } from \"./text-format-component/text-format-component\";\nimport { HeadingComponent } from \"./heading-component/heading-component\";\nimport { SuperSubFormat } from \"./super-sub-format/super-sub-format\";\nimport { UndoRedo } from \"./undo-redo/undo-redo\";\nimport { Alignment } from \"./alignment/alignment\";\nimport { ColorFormat } from \"./color-format/color-format\";\nimport { ListFormat } from \"./list-format/list-format\";\nimport { SourceCode } from \"./source-code/source-code\";\nimport { LinkComponent } from \"./link/link\";\nimport { ImageComponent } from \"./image/image.component\";\nimport { FontSizeComponent } from \"./font-size/font-size.component\";\nimport { IndentOutdentComponent } from \"./indent-outdent/indent-outdent.component\";\nimport { FontFamilyComponent } from \"./font-family/font-family.component\";\n\n@Component({\n  selector: 'app-toolbar-component',\n  imports: [TextFormatComponent, HeadingComponent, SuperSubFormat, UndoRedo, Alignment, ColorFormat, ListFormat, SourceCode, LinkComponent, ImageComponent, FontSizeComponent, IndentOutdentComponent, FontFamilyComponent],\n  templateUrl: './toolbar-component.html',\n  styleUrl: './toolbar-component.css'\n})\n\nexport class ToolbarComponent {\n  @Input() content: any;\n}","<div class=\"btn-toolbar mb-2 border p-1 bg-light rounded alugn-items-center\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\n    <app-text-format-component [content]=\"content\"></app-text-format-component>\n    <app-heading-component [content]=\"content\"></app-heading-component>\n    <app-font-size [content]=\"content\"></app-font-size>\n    <app-font-family [content]=\"content\"></app-font-family>\n    <app-super-sub-format [content]=\"content\"></app-super-sub-format>\n    <app-undo-redo [content]=\"content\"></app-undo-redo>\n    <app-alignment [content]=\"content\"></app-alignment>\n    <app-list-format [content]=\"content\"></app-list-format>\n    <app-indent-outdent [content]=\"content\"></app-indent-outdent>\n    <app-link [content]=\"content\"></app-link>\n    <app-color-format [content]=\"content\"></app-color-format>\n    <app-image [content]=\"content\"></app-image>\n    <!-- <app-source-code [content]=\"content\"></app-source-code> -->\n</div>","import { Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { editorSchema } from './utils/editor-schema';\nimport { editorPlugins } from './utils/editor-plugins';\nimport { EditorState } from 'prosemirror-state';\nimport { DOMParser as PMDOMParser, DOMSerializer } from 'prosemirror-model';\nimport { FormsModule } from '@angular/forms';\nimport { ToolbarComponent } from './toolbar-component/toolbar-component';\nimport { NgFor } from '@angular/common';\n\n@Component({\n  selector: 'lib-inventyv-html-editor',\n  standalone: true,\n  imports: [NgFor, ToolbarComponent, FormsModule],\n  templateUrl: './inventyv-html-editor.component.html',\n  styleUrls: ['./inventyv-html-editor.component.css']\n})\n\nexport class InventyvHtmlEditorComponent {\n  @ViewChild('editorHost', { static: true }) editorHost!: ElementRef<HTMLDivElement>;\n\n  // @Input() html: EditorView;\n  @Input() contentTemplate!: string;\n\n  html!: EditorView;\n\n  ngAfterViewInit(): void {\n    console.log(\"Content template \",this.contentTemplate);\n    \n    const state = EditorState.create({\n      schema: editorSchema,\n      plugins: editorPlugins\n    });\n\n    this.html = new EditorView(this.editorHost.nativeElement, {\n      state,\n      dispatchTransaction: tr => {\n        const newState = this.html.state.apply(tr);\n        this.html.updateState(newState);\n        this.contentTemplate = this.getHTML();\n      }\n    });\n    // Load initial HTML\n    this.setContentFromHTML(this.contentTemplate);\n  }\n\n  loadTemplate(template: string | null) {\n    if (!template) return;\n    this.contentTemplate = template;\n    this.setContentFromHTML(template);\n  }\n\n  setContentFromHTML(html: string | null) {\n    if (!html) return;\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    const pmDoc = PMDOMParser.fromSchema(this.html.state.schema).parse(doc.body);\n    const tr = this.html.state.tr.replaceWith(0, this.html.state.doc.content.size, pmDoc);\n    this.html.dispatch(tr);\n  }\n\n  getHTML(): string {\n    const serializer = DOMSerializer.fromSchema(this.html.state.schema);\n    const fragment = serializer.serializeFragment(this.html.state.doc.content);\n    const wrapper = document.createElement('div');\n    wrapper.appendChild(fragment);\n    return wrapper.innerHTML;\n  }\n}\n","<p>inventyv-html-editor works!</p>\n<!-- Toolbar -->\n<app-toolbar-component [content]=\"contentTemplate\"></app-toolbar-component>\n<!-- Editor Area -->\n<div #editorHost class=\"border rounded p-2\" style=\"min-height:75vh;\"></div>","/*\n * Public API Surface of inventyv-editor\n */\n\nexport * from './lib/components/html-editor/inventyv-html-editor/inventyv-html-editor.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["basicSchema","i1.ConfigService","PMDOMParser"],"mappings":"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"}